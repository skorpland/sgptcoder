---
title: Plugins
description: Write your own plugins to extend sgptcoder.
---

Plugins allow you to extend sgptcoder by hooking into various events and customizing behavior. You can create plugins to add new features, integrate with external services, or modify sgptcoder's default behavior.

---

## Create a plugin

A plugin is a **JavaScript/TypeScript module** that exports one or more plugin
functions. Each function receives a context object and returns a hooks object.

---

### Location

Plugins are loaded from:

1. `.sgptcoder/plugin` directory either in your project
2. Or, globally in `~/.config/sgptcoder/plugin`

---

### Basic structure

```js title=".sgptcoder/plugin/example.js"
export const MyPlugin = async ({ project, client, $, directory, worktree }) => {
  console.log("Plugin initialized!")

  return {
    // Hook implementations go here
  }
}
```

The plugin function receives:

- `project`: The current project information.
- `directory`: The current working directory.
- `worktree`: The git worktree path.
- `client`: An sgptcoder SDK client for interacting with the AI.
- `$`: Bun's [shell API](https://bun.com/docs/runtime/shell) for executing commands.

---

### TypeScript support

For TypeScript plugins, you can import types from the plugin package:

```ts title="my-plugin.ts" {1}
import type { Plugin } from "@skorpland/plugin"

export const MyPlugin: Plugin = async ({ project, client, $, directory, worktree }) => {
  return {
    // Type-safe hook implementations
  }
}
```

---

## Examples

Here are some examples of plugins you can use to extend sgptcoder.

---

### Send notifications

Send notifications when certain events occur:

```js title=".sgptcoder/plugin/notification.js"
export const NotificationPlugin = async ({ project, client, $, directory, worktree }) => {
  return {
    event: async ({ event }) => {
      // Send notification on session completion
      if (event.type === "session.idle") {
        await $`osascript -e 'display notification "Session completed!" with title "sgptcoder"'`
      }
    },
  }
}
```

We are using `osascript` to run AppleScript on macOS. Here we are using it to send notifications.

---

### .env protection

Prevent sgptcoder from reading `.env` files:

```javascript title=".sgptcoder/plugin/env-protection.js"
export const EnvProtection = async ({ project, client, $, directory, worktree }) => {
  return {
    "tool.execute.before": async (input, output) => {
      if (input.tool === "read" && output.args.filePath.includes(".env")) {
        throw new Error("Do not read .env files")
      }
    },
  }
}
```
